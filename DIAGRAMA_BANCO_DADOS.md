# ğŸ“Š Diagrama do Banco de Dados - Portal Cultural JaÃº

## ğŸ—ï¸ Arquitetura de Tabelas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            PREFEITURAS                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ id (PK), nome, municipio, estado, cnpj, email, telefone        â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ prefeitura_id (FK)
                               â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                    â”‚                    â”‚
          â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PROFILES      â”‚  â”‚  PARECERISTAS   â”‚  â”‚  PROPONENTES    â”‚
â”‚  (auth.users)   â”‚  â”‚                 â”‚  â”‚                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚  â”‚ id (PK)         â”‚  â”‚ id (PK)         â”‚
â”‚ user_type       â”‚  â”‚ prefeitura_id   â”‚  â”‚ prefeitura_id   â”‚
â”‚ email           â”‚  â”‚ email           â”‚  â”‚ email           â”‚
â”‚ full_name       â”‚  â”‚ senha_hash      â”‚  â”‚ senha_hash      â”‚
â”‚ prefeitura_id   â”‚  â”‚ nome            â”‚  â”‚ tipo (PF/PJ)    â”‚
â”‚ papel           â”‚  â”‚ cpf             â”‚  â”‚ nome            â”‚
â”‚                 â”‚  â”‚ especialidade[] â”‚  â”‚ cpf/cnpj        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ status          â”‚  â”‚ status          â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚                    â”‚
                              â”‚                    â”‚
                              â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          EDITAIS                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ id (PK), prefeitura_id (FK), codigo, nome, descricao,   â”‚    â”‚
â”‚  â”‚ data_abertura, data_final, status, modalidades[]        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                   â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                  â–¼                      â–¼                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚         â”‚ ARQUIVOS_EDITALâ”‚    â”‚   PROJETOS     â”‚                â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚         â”‚ id (PK)        â”‚    â”‚ id (PK)        â”‚                â”‚
â”‚         â”‚ edital_id (FK) â”‚    â”‚ prefeitura_id  â”‚                â”‚
â”‚         â”‚ nome, url      â”‚    â”‚ edital_id (FK) â”‚                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ proponente_id  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚                               â”‚ parecerista_id â”‚â—„â”€â”€â”€â”   â”‚       â”‚
â”‚                               â”‚ nome           â”‚    â”‚   â”‚       â”‚
â”‚                               â”‚ modalidade     â”‚    â”‚   â”‚       â”‚
â”‚                               â”‚ valor_solicitado    â”‚   â”‚       â”‚
â”‚                               â”‚ status         â”‚    â”‚   â”‚       â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚       â”‚
â”‚                                       â”‚             â”‚   â”‚       â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”˜       â”‚
â”‚              â”‚                        â”‚             â”‚           â”‚
â”‚              â–¼                        â–¼             â”‚           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚           â”‚
â”‚    â”‚ METAS_PROJETO    â”‚    â”‚ EQUIPE_PROJETO   â”‚    â”‚           â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚           â”‚
â”‚    â”‚ id (PK)          â”‚    â”‚ id (PK)          â”‚    â”‚           â”‚
â”‚    â”‚ projeto_id (FK)  â”‚    â”‚ projeto_id (FK)  â”‚    â”‚           â”‚
â”‚    â”‚ descricao, ordem â”‚    â”‚ nome, funcao     â”‚    â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚           â”‚
â”‚                                                     â”‚           â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚              â”‚                        â”‚                         â”‚
â”‚              â–¼                        â–¼                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚    â”‚ DOCUMENTOS_      â”‚    â”‚ PLANILHA_        â”‚                â”‚
â”‚    â”‚ HABILITACAO      â”‚    â”‚ ORCAMENTARIA     â”‚                â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚    â”‚ id (PK)          â”‚    â”‚ id (PK)          â”‚                â”‚
â”‚    â”‚ projeto_id (FK)  â”‚    â”‚ projeto_id (FK)  â”‚                â”‚
â”‚    â”‚ nome, tipo       â”‚    â”‚ categoria, item  â”‚                â”‚
â”‚    â”‚ status, arquivo  â”‚    â”‚ valor_unitario   â”‚                â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AVALIAÃ‡Ã•ES                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ id (PK), prefeitura_id, projeto_id (FK),               â”‚     â”‚
â”‚  â”‚ parecerista_id (FK), nota_relevancia,                  â”‚     â”‚
â”‚  â”‚ nota_viabilidade, nota_impacto, nota_orcamento,        â”‚     â”‚
â”‚  â”‚ nota_inovacao, nota_sustentabilidade, nota_final,      â”‚     â”‚
â”‚  â”‚ parecer_tecnico, recomendacao, status                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       COMUNICAÃ‡Ã•ES                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ id (PK), prefeitura_id, remetente_tipo, remetente_id,  â”‚     â”‚
â”‚  â”‚ destinatario_tipo, destinatario_id, projeto_id (FK),   â”‚     â”‚
â”‚  â”‚ tipo, assunto, mensagem, status, prioridade,           â”‚     â”‚
â”‚  â”‚ resposta, respondido_por_tipo, respondido_por_id       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â”‚                                      â”‚
â”‚                          â–¼                                      â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                â”‚ ANEXOS_          â”‚                             â”‚
â”‚                â”‚ COMUNICACAO      â”‚                             â”‚
â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
â”‚                â”‚ id (PK)          â”‚                             â”‚
â”‚                â”‚ comunicacao_id   â”‚                             â”‚
â”‚                â”‚ nome, url        â”‚                             â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PRESTAÃ‡ÃƒO DE CONTAS                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ PRESTACOES_CONTAS                                      â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ id (PK), prefeitura_id, projeto_id (FK),               â”‚     â”‚
â”‚  â”‚ proponente_id (FK), tipo, valor_executado,             â”‚     â”‚
â”‚  â”‚ data_entrega, prazo_entrega, status,                   â”‚     â”‚
â”‚  â”‚ status_open_banking, parecer_analise                   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â”‚                                      â”‚
â”‚                          â–¼                                      â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                â”‚ MOVIMENTACOES_   â”‚                             â”‚
â”‚                â”‚ FINANCEIRAS      â”‚                             â”‚
â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
â”‚                â”‚ id (PK)          â”‚                             â”‚
â”‚                â”‚ projeto_id (FK)  â”‚                             â”‚
â”‚                â”‚ prestacao_id (FK)â”‚                             â”‚
â”‚                â”‚ tipo, descricao  â”‚                             â”‚
â”‚                â”‚ valor, data      â”‚                             â”‚
â”‚                â”‚ status_validacao â”‚                             â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ CONTAS_MONITORADAS (Open Banking)                      â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ id (PK), prefeitura_id, projeto_id (FK),               â”‚     â”‚
â”‚  â”‚ proponente_id (FK), banco, agencia, conta,             â”‚     â”‚
â”‚  â”‚ consentimento_id, consentimento_ativo, saldo_atual,    â”‚     â”‚
â”‚  â”‚ valor_total_recebido, valor_total_gasto, status        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               RECUPERAÃ‡ÃƒO DE SENHA                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ RECUPERACAO_SENHA_PARECERISTA                          â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ id (PK), parecerista_id (FK), token, usado,            â”‚     â”‚
â”‚  â”‚ expira_em                                              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ RECUPERACAO_SENHA_PROPONENTE                           â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ id (PK), proponente_id (FK), token, usado,             â”‚     â”‚
â”‚  â”‚ expira_em                                              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”‘ Relacionamentos Principais

### 1. Prefeitura â†’ UsuÃ¡rios
```
prefeituras (1) â”€â”€â”€â”€â”€â”€â”€â”€ (*) profiles
prefeituras (1) â”€â”€â”€â”€â”€â”€â”€â”€ (*) pareceristas
prefeituras (1) â”€â”€â”€â”€â”€â”€â”€â”€ (*) proponentes
```

### 2. Prefeitura â†’ Editais â†’ Projetos
```
prefeituras (1) â”€â”€â”€â”€â”€â”€â”€â”€ (*) editais
editais (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (*) projetos
proponentes (1) â”€â”€â”€â”€â”€â”€â”€ (*) projetos
pareceristas (1) â”€â”€â”€â”€â”€â”€  (*) projetos (atribuiÃ§Ã£o)
```

### 3. Projetos â†’ Documentos e AvaliaÃ§Ã£o
```
projetos (1) â”€â”€â”€â”€â”€â”€â”€â”€ (*) metas_projeto
projetos (1) â”€â”€â”€â”€â”€â”€â”€â”€ (*) equipe_projeto
projetos (1) â”€â”€â”€â”€â”€â”€â”€â”€ (*) documentos_habilitacao
projetos (1) â”€â”€â”€â”€â”€â”€â”€â”€ (*) planilha_orcamentaria
projetos (1) â”€â”€â”€â”€â”€â”€â”€â”€ (1) avaliacoes
```

### 4. Projetos â†’ ComunicaÃ§Ã£o e PrestaÃ§Ã£o
```
projetos (1) â”€â”€â”€â”€â”€â”€â”€â”€ (*) comunicacoes
projetos (1) â”€â”€â”€â”€â”€â”€â”€â”€ (*) prestacoes_contas
projetos (1) â”€â”€â”€â”€â”€â”€â”€â”€ (*) movimentacoes_financeiras
projetos (1) â”€â”€â”€â”€â”€â”€â”€â”€ (1) contas_monitoradas
```

## ğŸ“ ENUMs DisponÃ­veis

### status_edital
- `ativo`
- `arquivado`
- `rascunho`

### tipo_proponente
- `PF` (Pessoa FÃ­sica)
- `PJ` (Pessoa JurÃ­dica)
- `Grupo`
- `COOP` (Cooperativa)

### status_projeto
- `recebido`
- `em_avaliacao`
- `avaliado`
- `aprovado`
- `rejeitado`
- `em_execucao`
- `concluido`

### status_documento
- `pendente`
- `enviado`
- `aprovado`
- `rejeitado`

### status_prestacao
- `pendente`
- `em_analise`
- `aprovado`
- `rejeitado`
- `exigencia`

### status_open_banking
- `conforme`
- `alerta`
- `irregularidade`
- `nao_monitorado`

### tipo_comunicacao
- `recurso`
- `duvida`
- `solicitacao`
- `notificacao`

### status_comunicacao
- `enviado`
- `lido`
- `em_analise`
- `respondido`

### modalidade_cultural
- `musica`
- `teatro`
- `danca`
- `artes_visuais`
- `literatura`
- `cinema`
- `cultura_popular`
- `circo`
- `outros`

### papel_usuario
- `gestor`
- `assistente`
- `financeiro`
- `administrador`

## ğŸ” SeguranÃ§a (RLS)

### NÃ­vel de Isolamento por Prefeitura

Todas as tabelas principais incluem `prefeitura_id` e estÃ£o isoladas por RLS:

âœ… **Isolamento Completo:**
- Editais
- Projetos
- AvaliaÃ§Ãµes
- ComunicaÃ§Ãµes
- PrestaÃ§Ãµes de Contas
- MovimentaÃ§Ãµes Financeiras
- Contas Monitoradas

âœ… **Acesso Controlado:**
- Pareceristas: SÃ³ veem projetos atribuÃ­dos a eles
- Proponentes: SÃ³ veem seus prÃ³prios projetos
- Prefeitura: VÃª tudo da sua prefeitura

## ğŸš€ Edge Functions

### 1. `cadastrar-parecerista`
**Endpoint:** `POST /functions/v1/cadastrar-parecerista`
- Cadastra novo parecerista
- Criptografa senha com bcrypt
- Valida CPF e email Ãºnicos

### 2. `auth-parecerista`
**Endpoint:** `POST /functions/v1/auth-parecerista`
- Autentica parecerista
- Retorna JWT customizado
- Atualiza Ãºltimo acesso

### 3. `cadastrar-proponente`
**Endpoint:** `POST /functions/v1/cadastrar-proponente`
- Cadastra novo proponente (PF/PJ/Grupo/COOP)
- Criptografa senha com bcrypt
- Valida CPF/CNPJ e email Ãºnicos

### 4. `auth-proponente`
**Endpoint:** `POST /functions/v1/auth-proponente`
- Autentica proponente
- Retorna JWT customizado
- Atualiza Ãºltimo acesso

## ğŸ“Š Ãndices para Performance

Todos os campos frequentemente usados em queries possuem Ã­ndices:

- `prefeitura_id` em todas as tabelas principais
- `email` em pareceristas e proponentes
- `cpf` e `cnpj` para buscas rÃ¡pidas
- `status` em projetos, editais e prestaÃ§Ãµes
- `especialidade` (GIN index para arrays)
- Foreign keys para joins eficientes

## ğŸ’¾ Triggers AutomÃ¡ticos

### Criptografia de Senhas
- `before_insert_parecerista_criptografar_senha`
- `before_insert_proponente_criptografar_senha`

### AtualizaÃ§Ã£o de Timestamps
- `update_prefeituras_updated_at`
- `update_pareceristas_updated_at`
- `update_proponentes_updated_at`
- `update_editais_updated_at`
- `update_projetos_updated_at`
- `update_avaliacoes_updated_at`
- `update_comunicacoes_updated_at`
- `update_prestacoes_updated_at`
- `update_contas_updated_at`
- `update_documentos_updated_at`
- `update_planilha_updated_at`

## ğŸ“ˆ EstatÃ­sticas

**Total de Tabelas:** 20+
**Total de FunÃ§Ãµes:** 10+
**Total de Triggers:** 15+
**Total de Ãndices:** 40+
**Total de PolÃ­ticas RLS:** 25+

## ğŸ¯ Fluxo de Dados Principal

```
1. PREFEITURA cria EDITAL
   â†“
2. PROPONENTE se cadastra
   â†“
3. PROPONENTE submete PROJETO para EDITAL
   â†“
4. PREFEITURA atribui PARECERISTA ao PROJETO
   â†“
5. PARECERISTA realiza AVALIAÃ‡ÃƒO
   â†“
6. PREFEITURA aprova/rejeita PROJETO
   â†“
7. PROJETO APROVADO inicia execuÃ§Ã£o
   â†“
8. PROPONENTE registra MOVIMENTAÃ‡Ã•ES FINANCEIRAS
   â†“
9. Sistema monitora via OPEN BANKING
   â†“
10. PROPONENTE envia PRESTAÃ‡ÃƒO DE CONTAS
    â†“
11. PREFEITURA analisa e aprova PRESTAÃ‡ÃƒO
```

## ğŸ”„ Multi-Tenant

Todo o sistema Ã© **multi-tenant** baseado em `prefeitura_id`. Isso significa:

- MÃºltiplas prefeituras podem usar o mesmo banco
- Dados sÃ£o completamente isolados entre prefeituras
- RLS garante que nenhuma prefeitura veja dados de outra
- Ideal para expansÃ£o futura do sistema

